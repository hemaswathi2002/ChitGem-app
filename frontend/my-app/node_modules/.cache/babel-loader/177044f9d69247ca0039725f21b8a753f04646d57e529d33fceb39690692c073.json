{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\samiksha wagrekar\\\\OneDrive\\\\Documents\\\\oct23 mern\\\\ChitGem-app\\\\frontend\\\\my-app\\\\src\\\\LoginForm.js\",\n  _s = $RefreshSig$();\nimport { useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { useAuth } from './Context/AuthrorizeContext';\n// import { UsersContext } from './Context/UsersContext'\n// import ShopForm from './Components/Shop/ShopsForm'\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function LoginForm(props) {\n  _s();\n  // const {users,usersDispatch} = useContext(UsersContext)\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [serverErrors, setServerErrors] = useState([]);\n  const {\n    handleLogin\n  } = useAuth();\n  const navigate = useNavigate();\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const formData = {\n      email,\n      password\n    };\n    try {\n      const response = await axios.post('http://localhost:3009/api/login', formData);\n      console.log(response.data.token);\n      const token = response.data.token;\n      localStorage.setItem('token', token);\n      const userResponse = await axios.get('http://localhost:3009/api/users/account', {\n        headers: {\n          Authorization: localStorage.getItem('token')\n        }\n      });\n      handleLogin(userResponse.data);\n      navigate('/');\n      // usersDispatch({type:'SIGN_IN',payload : true});\n      setServerErrors([]);\n\n      // navigate('/dashboard')\n      // loginToast();\n    } catch (err) {\n      console.log(err);\n      // console.log(err.response.data.errors)\n      setServerErrors(err.response.data.errors);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [serverErrors && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: serverErrors\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 30\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Enter email...\",\n          onChange: e => setEmail(e.target.value),\n          value: email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 16\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          placeholder: \"Enter password...\",\n          name: \"password\",\n          onChange: e => setPassword(e.target.value),\n          value: password\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/forgotpassword\",\n          children: \"forgot Password?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/signup\",\n          children: \"Sign Up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n}\n_s(LoginForm, \"r3IUPai5q1USEmFJGvLu5HA4mEk=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = LoginForm;\nvar _c;\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"names":["useState","axios","useNavigate","Link","useAuth","jsxDEV","_jsxDEV","LoginForm","props","_s","email","setEmail","password","setPassword","serverErrors","setServerErrors","handleLogin","navigate","handleSubmit","e","preventDefault","formData","response","post","console","log","data","token","localStorage","setItem","userResponse","get","headers","Authorization","getItem","err","errors","children","style","color","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","onChange","target","value","name","to","_c","$RefreshReg$"],"sources":["C:/Users/samiksha wagrekar/OneDrive/Documents/oct23 mern/ChitGem-app/frontend/my-app/src/LoginForm.js"],"sourcesContent":["import {useState} from 'react'\r\nimport axios from 'axios'\r\nimport { useNavigate,Link} from 'react-router-dom'\r\nimport { useAuth } from './Context/AuthrorizeContext'\r\n// import { UsersContext } from './Context/UsersContext'\r\n// import ShopForm from './Components/Shop/ShopsForm'\r\nexport default function LoginForm(props){\r\n    // const {users,usersDispatch} = useContext(UsersContext)\r\n    const [email,setEmail] = useState('')\r\n    const [password,setPassword] = useState('')\r\n    const [serverErrors,setServerErrors] = useState([])\r\n    const { handleLogin} = useAuth() \r\n\r\n    const navigate = useNavigate()\r\n\r\n    const handleSubmit = async(e)=>{\r\n        e.preventDefault()\r\n\r\n        const formData = {\r\n            email,\r\n            password\r\n        }\r\n        try{\r\n            const response = await axios.post('http://localhost:3009/api/login',formData)\r\n            console.log(response.data.token)\r\n            const token = response.data.token\r\n            localStorage.setItem('token',token)\r\n            const userResponse = await axios.get('http://localhost:3009/api/users/account', { \r\n                    headers: {\r\n                        Authorization: localStorage.getItem('token')\r\n                    }\r\n                })\r\n                handleLogin(userResponse.data)\r\n                navigate('/')\r\n            // usersDispatch({type:'SIGN_IN',payload : true});\r\n            setServerErrors([])\r\n            \r\n            // navigate('/dashboard')\r\n            // loginToast();\r\n        }\r\n        catch(err){\r\n            console.log(err)\r\n            // console.log(err.response.data.errors)\r\n            setServerErrors(err.response.data.errors)\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div>\r\n            {serverErrors && <p style = {{color:'red'}}>{serverErrors}</p>}\r\n            <form onSubmit = {handleSubmit}>\r\n                <h2>Login</h2>\r\n               <div>\r\n               <input type='text'\r\n                placeholder='Enter email...'\r\n                onChange = {(e)=>setEmail(e.target.value)}\r\n                value={email}\r\n                />\r\n                </div>\r\n                <div>\r\n                <input type='password'\r\n                placeholder='Enter password...'\r\n                name = 'password'\r\n                onChange = {(e)=>setPassword(e.target.value)}\r\n                value={password}\r\n                />\r\n                </div>\r\n                <div>\r\n                    <input type = 'submit'/>\r\n                </div>\r\n                <div>\r\n                <Link to = '/forgotpassword'>forgot Password?</Link>\r\n                </div>\r\n                <div>\r\n                <Link to=\"/signup\">Sign Up</Link>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}